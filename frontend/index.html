<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bingo Bash - Casual Bingo Game</title>
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üéâ</text></svg>">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <!-- SCREEN 1: Welcome Screen -->
    <div class="screen" id="welcomeScreen">
        <div class="welcome-container">
            <!-- Background Video -->
            <video class="welcome-bg-video" autoplay loop muted playsinline disablePictureInPicture>
                <source src="assets/videos/welcome-background.webm" type="video/webm">
                <source src="assets/videos/welcome-background.mp4" type="video/mp4">
            </video>
            <div class="welcome-badge">NEW<br>ROOM</div>
            <div class="game-logo">
                <div class="logo-text">
                    <span class="logo-bingo">BINGO</span>
                    <span class="logo-bash">Bash</span>
                </div>
            </div>
            <div class="welcome-character">
                <div class="character-emoji">üéâ</div>
            </div>
            <div class="welcome-buttons">
                <button class="btn btn-facebook" id="playWithFriendsBtn">
                    <span class="fb-icon">f</span> Play with Friends
                </button>
                <button class="btn btn-guest" id="playAsGuestBtn">Play as Guest</button>
            </div>
            <p class="welcome-footer">Sign in to save your progress and play on multiple devices.</p>
        </div>

        <!-- Friends Popup Modal -->
        <div class="modal-overlay hidden" id="friendsModal">
            <div class="modal-popup">
                <div class="dropdown-header">
                    <span>üòÖ Play With Friends</span>
                    <button class="dropdown-close" id="friendsCloseBtn">‚úï</button>
                </div>
                <div class="modal-content">
                    <p>But you don't have any friends! üò¢</p>
                    <p>Just play as <strong>Guest</strong> instead!</p>
                </div>
                <div class="modal-actions">
                    <button class="btn-modal-ok" id="friendsOkBtn">OK, I'll Play Solo üò≠</button>
                </div>
            </div>
        </div>
    </div>

    <!-- SCREEN 2: Room Selection Screen -->
    <div class="screen hidden" id="roomScreen">
        <div class="room-container">
            <!-- Top Bar -->
            <div class="top-bar">
                <div class="profile-level-container">
                    <div class="profile-level-section" id="profileLevelSection">
                        <div class="profile-pic" id="profilePic">ü¶ä</div>
                        <div class="level-badge">Lvl: 1</div>
                    </div>

                    <!-- Profile Selector Dropdown -->
                    <div class="profile-dropdown hidden" id="profileDropdown">
                        <div class="dropdown-header">
                            <span>Choose Your Avatar</span>
                            <button class="dropdown-close" id="profileDropdownClose">‚úï</button>
                        </div>
                        <div class="profile-grid" id="profileGrid">
                            <!-- Will be populated by JavaScript -->
                        </div>
                    </div>
                </div>

                <div class="currency-display">
                    <div class="currency-item">
                        <span class="coin-icon">ü™ô</span>
                        <span id="coins">5,000</span>
                    </div>
                    <div class="currency-item">
                        <span class="power-icon">‚ö°</span>
                        <span id="power">50</span>
                    </div>
                </div>

                <div class="settings-container">
                    <button class="settings-btn" id="settingsBtn" title="Settings">‚öôÔ∏è</button>

                    <!-- Settings Dropdown -->
                    <div class="settings-dropdown hidden" id="settingsDropdown">
                        <div class="dropdown-header">
                            <span>Settings</span>
                            <button class="dropdown-close" id="settingsDropdownClose">‚úï</button>
                        </div>
                        <button class="dropdown-item" id="muteToggle">
                            <span class="item-icon" id="muteIcon">üîä</span>
                            <span class="item-label" id="muteLabel">Sound: ON</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Room Cards -->
            <div class="room-cards-container">
                <button class="nav-arrow nav-left" id="navLeft">‚óÄ</button>

                <!-- What's Hot Tab Content -->
                <div class="tab-content" id="whatsHotContent">
                    <div class="room-cards">
                        <div class="room-card" data-room="classic">
                            <div class="room-card-image classic-room">
                                <video class="room-video" autoplay loop muted playsinline disablePictureInPicture>
                                    <source src="assets/rooms/classic-bingo.webm" type="video/webm">
                                    <source src="assets/rooms/classic-bingo.mp4" type="video/mp4">
                                </video>
                            </div>
                            <div class="room-card-title">Classic Bingo</div>
                            <div class="room-card-desc">Traditional fun awaits!</div>
                        </div>

                        <div class="room-card" data-room="adventure">
                            <div class="room-card-image adventure-room">
                                <video class="room-video" autoplay loop muted playsinline disablePictureInPicture>
                                    <source src="assets/rooms/aztec-adventure.webm" type="video/webm">
                                    <source src="assets/rooms/aztec-adventure.mp4" type="video/mp4">
                                </video>
                            </div>
                            <div class="room-card-title">Aztec Adventure</div>
                            <div class="room-card-desc">An action packed path to Bingo!</div>
                        </div>

                        <div class="room-card" data-room="orbella">
                            <div class="room-card-image orbella-room">
                                <div class="room-icon">‚ú®</div>
                                <div class="room-label">New</div>
                            </div>
                            <div class="room-card-title">Orbella</div>
                            <div class="room-card-desc">Create your custom video!</div>
                        </div>
                    </div>
                </div>

                <!-- Bingo Rooms Tab Content -->
                <div class="tab-content hidden" id="bingoRoomsContent">
                    <div class="room-cards">
                        <div class="room-card locked" data-room="space">
                            <div class="room-card-image space-room">
                                <video class="room-video" autoplay loop muted playsinline disablePictureInPicture>
                                    <source src="assets/rooms/space-odyssey.webm" type="video/webm">
                                    <source src="assets/rooms/space-odyssey.mp4" type="video/mp4">
                                </video>
                                <div class="lock-overlay">
                                    <div class="lock-icon">üîí</div>
                                    <div class="unlock-text">Unlocks At<br><strong>Level 5</strong></div>
                                </div>
                            </div>
                            <div class="room-card-title">Space Odyssey</div>
                            <div class="room-card-desc">Blast off to cosmic wins!</div>
                        </div>

                        <div class="room-card locked" data-room="pirate">
                            <div class="room-card-image pirate-room">
                                <video class="room-video" autoplay loop muted playsinline disablePictureInPicture>
                                    <source src="assets/rooms/pirate-treasure.webm" type="video/webm">
                                    <source src="assets/rooms/pirate-treasure.mp4" type="video/mp4">
                                </video>
                                <div class="lock-overlay">
                                    <div class="lock-icon">üîí</div>
                                    <div class="unlock-text">Unlocks At<br><strong>Level 10</strong></div>
                                </div>
                            </div>
                            <div class="room-card-title">Pirate's Treasure</div>
                            <div class="room-card-desc">Hunt for hidden riches!</div>
                        </div>

                        <div class="room-card locked" data-room="candy">
                            <div class="room-card-image candy-room">
                                <video class="room-video" autoplay loop muted playsinline disablePictureInPicture>
                                    <source src="assets/rooms/candy-land.webm" type="video/webm">
                                    <source src="assets/rooms/candy-land.mp4" type="video/mp4">
                                </video>
                                <div class="lock-overlay">
                                    <div class="lock-icon">üîí</div>
                                    <div class="unlock-text">Unlocks At<br><strong>Level 15</strong></div>
                                </div>
                            </div>
                            <div class="room-card-title">Candy Land</div>
                            <div class="room-card-desc">Sweet victories await!</div>
                        </div>

                        <div class="room-card locked" data-room="jungle">
                            <div class="room-card-image jungle-room">
                                <video class="room-video" autoplay loop muted playsinline disablePictureInPicture>
                                    <source src="assets/rooms/jungle-safari.webm" type="video/webm">
                                    <source src="assets/rooms/jungle-safari.mp4" type="video/mp4">
                                </video>
                                <div class="lock-overlay">
                                    <div class="lock-icon">üîí</div>
                                    <div class="unlock-text">Unlocks At<br><strong>Level 18</strong></div>
                                </div>
                            </div>
                            <div class="room-card-title">Jungle Safari</div>
                            <div class="room-card-desc">Wild wins in the safari!</div>
                        </div>

                        <div class="room-card locked" data-room="casino">
                            <div class="room-card-image casino-room">
                                <video class="room-video" autoplay loop muted playsinline disablePictureInPicture>
                                    <source src="assets/rooms/vegas-nights.webm" type="video/webm">
                                    <source src="assets/rooms/vegas-nights.mp4" type="video/mp4">
                                </video>
                                <div class="lock-overlay">
                                    <div class="lock-icon">üîí</div>
                                    <div class="unlock-text">Coming<br><strong>Soon!</strong></div>
                                </div>
                            </div>
                            <div class="room-card-title">Vegas Nights</div>
                            <div class="room-card-desc">Hit the jackpot!</div>
                        </div>

                        <div class="room-card locked" data-room="underwater">
                            <div class="room-card-image underwater-room">
                                <video class="room-video" autoplay loop muted playsinline disablePictureInPicture>
                                    <source src="assets/rooms/ocean-deep.webm" type="video/webm">
                                    <source src="assets/rooms/ocean-deep.mp4" type="video/mp4">
                                </video>
                                <div class="lock-overlay">
                                    <div class="lock-icon">üîí</div>
                                    <div class="unlock-text">Coming<br><strong>Soon!</strong></div>
                                </div>
                            </div>
                            <div class="room-card-title">Ocean Deep</div>
                            <div class="room-card-desc">Dive into fortune!</div>
                        </div>
                    </div>
                </div>

                <button class="nav-arrow nav-right" id="navRight">‚ñ∂</button>
            </div>

            <!-- Bottom Navigation -->
            <div class="bottom-nav">
                <button class="nav-item active" id="whatsHotTab">
                    <video class="nav-icon-video" autoplay loop muted playsinline disablePictureInPicture>
                        <source src="assets/videos/fire-icon.webm" type="video/webm">
                        <source src="assets/videos/fire-icon.mp4" type="video/mp4">
                        <span class="nav-icon">üî•</span>
                    </video>
                    <span class="nav-label">What's Hot</span>
                </button>
                <button class="nav-item" id="bingoRoomsTab">
                    <video class="nav-icon-video" autoplay loop muted playsinline disablePictureInPicture>
                        <source src="assets/videos/bingo-card-icon.webm" type="video/webm">
                        <source src="assets/videos/bingo-card-icon.mp4" type="video/mp4">
                        <span class="nav-icon">üéÆ</span>
                    </video>
                    <span class="nav-label">Bingo Rooms</span>
                </button>
                <button class="nav-item" id="miniGamesTab">
                    <video class="nav-icon-video" autoplay loop muted playsinline disablePictureInPicture>
                        <source src="assets/videos/dice-icon.webm" type="video/webm">
                        <source src="assets/videos/dice-icon.mp4" type="video/mp4">
                        <span class="nav-icon">üé≤</span>
                    </video>
                    <span class="nav-label">Mini Games</span>
                </button>
            </div>
        </div>

        <!-- Mini Games Popup Modal -->
        <div class="modal-overlay hidden" id="miniGamesModal">
            <div class="modal-popup">
                <div class="dropdown-header">
                    <span>üéÆ Mini Games</span>
                    <button class="dropdown-close" id="miniGamesCloseBtn">‚úï</button>
                </div>
                <div class="modal-content">
                    <p>Unlocks at <strong>Level 80!</strong></p>
                    <p>Keep playing to reach this level and unlock exciting mini games!</p>
                </div>
                <div class="modal-actions">
                    <button class="btn-modal-ok" id="miniGamesOkBtn">OK</button>
                </div>
            </div>
        </div>
    </div>

    <!-- SCREEN 3: Game Board Screen -->
    <div class="screen hidden" id="gameScreen">
        <div class="game-board-container">
            <!-- Top Game Bar -->
            <div class="game-top-bar">
                <button class="home-btn" id="homeBtn">üè†</button>

                <!-- Called Numbers -->
                <div class="called-numbers-top">
                    <div class="called-ball current empty" data-letter="">
                        <span class="ball-letter" id="ballLetterCurrent"></span>
                        <span class="ball-number" id="ballCurrent"></span>
                    </div>
                    <div class="called-ball empty" data-letter="">
                        <span class="ball-letter" id="ballLetter1"></span>
                        <span class="ball-number" id="ball1"></span>
                    </div>
                    <div class="called-ball empty" data-letter="">
                        <span class="ball-letter" id="ballLetter2"></span>
                        <span class="ball-number" id="ball2"></span>
                    </div>
                    <div class="called-ball empty" data-letter="">
                        <span class="ball-letter" id="ballLetter3"></span>
                        <span class="ball-number" id="ball3"></span>
                    </div>
                    <div class="called-ball empty" data-letter="">
                        <span class="ball-letter" id="ballLetter4"></span>
                        <span class="ball-number" id="ball4"></span>
                    </div>
                    <div class="called-ball empty" data-letter="">
                        <span class="ball-letter" id="ballLetter5"></span>
                        <span class="ball-number" id="ball5"></span>
                    </div>
                </div>

                <!-- Power Play & Room Info -->
                <div class="game-info">
                    <div class="power-play">
                        <span class="power-label">Power Plays:</span>
                        <div class="power-bar">
                            <div class="power-fill" id="powerFill"></div>
                        </div>
                        <span class="power-count">‚≠ê +4</span>
                    </div>
                    <div class="room-info">
                        <div class="room-name">Grand Canyon</div>
                        <div class="bingos-left">10 Bingos left</div>
                        <div class="players-count">6 Players</div>
                    </div>
                </div>
            </div>

            <!-- Main Game Area -->
            <div class="game-main">
                <!-- Left: Bingo Card -->
                <div class="bingo-section">
                    <div class="bingo-header-letters">
                        <span class="bingo-letter">B</span>
                        <span class="bingo-letter">I</span>
                        <span class="bingo-letter">N</span>
                        <span class="bingo-letter">G</span>
                        <span class="bingo-letter">O</span>
                    </div>
                    <div class="bingo-card" id="bingoCard">
                        <!-- Card tiles will be generated by JavaScript -->
                    </div>
                    <div class="card-controls">
                        <button class="card-btn" id="autoDaubBtn">
                            <span class="btn-icon">üéØ</span>
                            Auto Daub<br>Card
                        </button>
                        <div class="card-indicator">Card 1</div>
                        <button class="card-btn" id="fishCardBtn">
                            <span class="btn-icon">üêü</span>
                            Fish Card
                        </button>
                    </div>
                </div>

                <!-- Center: Bingo Logo & Powerups -->
                <div class="center-section">
                    <div class="bingo-logo-game">
                        <div class="logo-3d">BINGO</div>
                        <div class="tent-decoration">üé™</div>
                    </div>
                    <div class="powerups">
                        <div class="powerup-slot">
                            <div class="powerup-icon">üéÅ</div>
                            <div class="powerup-count">2</div>
                        </div>
                        <div class="powerup-slot">
                            <div class="powerup-icon">‚ú®</div>
                        </div>
                        <div class="powerup-slot">
                            <div class="powerup-icon">üéØ</div>
                        </div>
                        <div class="powerup-slot">
                            <div class="powerup-icon">‚ö°</div>
                        </div>
                    </div>
                </div>

                <!-- Right: Chat & Players -->
                <div class="chat-section">
                    <div class="auto-daub-cards">
                        <div class="daub-card active">
                            <span class="card-num">3</span>
                            <span class="star-icon">‚≠ê</span>
                        </div>
                        <div class="daub-card">
                            <span class="card-num">4</span>
                            <span class="star-icon">‚≠ê</span>
                        </div>
                    </div>

                    <div class="chat-box">
                        <div class="chat-header">
                            <span>CHAT</span>
                            <button class="chat-close">‚úï</button>
                        </div>
                        <div class="chat-messages" id="chatMessages">
                            <div class="chat-message system">
                                <em>Welcome to the game! Good luck! üçÄ</em>
                            </div>
                        </div>
                        <div class="chat-input-container">
                            <input type="text" class="chat-input" placeholder="Type to chat" id="chatInput">
                            <button class="chat-send-btn" id="chatSendBtn">Send</button>
                        </div>
                    </div>

                    <div class="chat-footer">
                        <button class="footer-btn">üèÜ</button>
                        <button class="footer-btn">üìã</button>
                        <button class="footer-btn">üë•</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- SCREEN 4: Orbella Room Screen -->
    <div class="screen hidden" id="orbellaScreen">
        <div class="orbella-container">
            <div class="orbella-top-bar">
                <button class="home-btn" id="orbellaHomeBtn">üè†</button>
                <button class="orbella-dropdown-toggle" id="orbellaDropdownToggle">‚ñº</button>
                <div class="orbella-dropdown-content hidden" id="orbellaDropdownContent">
                    <div class="orbella-status" id="orbellaStatus">Ready</div>
                    <div class="orbella-controls">
                        <button class="btn btn-secondary hidden" id="orbellaResetBtn">üîÑ Reset Theme</button>
                        <button class="btn btn-secondary hidden" id="orbellaNewCardBtn">üé¥ New Card</button>
                    </div>
                </div>
            </div>
            <div class="orbella-main hidden" id="orbellaMain">
                <div class="orbella-left">
                    <div class="orbella-card">
                        <div class="orbella-card-title">Generate Background</div>
                        <div class="orbella-option-group">
                            <label><input type="radio" name="orbellaMode" value="text" checked> Text</label>
                            <label><input type="radio" name="orbellaMode" value="image"> Upload Image</label>
                        </div>
                        <div id="orbellaTextInputGroup">
                            <label class="orbella-label">Theme or prompt</label>
                            <textarea id="orbellaText" class="orbella-textarea"
                                placeholder="e.g. Cozy autumn forest"></textarea>
                        </div>
                        <div id="orbellaImageInputGroup" class="hidden">
                            <label class="orbella-label">Choose an image</label>
                            <input id="orbellaImage" class="orbella-file" type="file" accept="image/*" />
                        </div>
                        <button class="btn btn-primary btn-large" id="orbellaGenerateBtn">Generate</button>
                        <div class="orbella-hint">Your video will loop seamlessly.</div>
                    </div>
                </div>
                <div class="orbella-right">
                    <div id="orbellaCanvas" class="video-box"></div>
                </div>
            </div>


            <!-- Orbella Input Modal -->
            <div id="orbellaModal" class="orbella-modal hidden">
                <div class="orbella-modal-dialog">
                    <div class="orbella-modal-header">
                        <div class="orbella-modal-title">Generate Background</div>
                        <button id="orbellaModalClose" class="orbella-modal-close">‚úï</button>
                    </div>
                    <div class="orbella-modal-body">
                        <div class="orbella-option-group">
                            <label><input type="radio" name="orbellaModalMode" value="text" checked> Text</label>
                            <label><input type="radio" name="orbellaModalMode" value="image"> Upload Image</label>
                        </div>
                        <div id="orbellaModalTextGroup">
                            <label class="orbella-label">Theme or prompt</label>
                            <textarea id="orbellaModalText" class="orbella-textarea"
                                placeholder="e.g. Cozy autumn forest"></textarea>
                        </div>
                        <div id="orbellaModalImageGroup" class="hidden">
                            <label class="orbella-label">Choose an image</label>
                            <input id="orbellaModalImage" class="orbella-file" type="file" accept="image/*" />
                        </div>
                    </div>
                    <div class="orbella-modal-footer">
                        <button class="btn btn-primary btn-large" id="orbellaModalGenerate">üé¨ Generate</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Win Modal -->
    <div class="modal" id="winModal">
        <div class="modal-content">
            <div class="confetti-container" id="confetti"></div>
            <h2>üéä BINGO! üéä</h2>
            <p class="win-message">Congratulations! You won!</p>
            <div class="win-pattern" id="winPattern"></div>
            <button class="btn btn-primary btn-large" id="playAgainBtn">PLAY AGAIN</button>
        </div>
    </div>

    <!-- Audio Elements (using Web Audio API for generated sounds) -->
    <script src="audio.js"></script>
    <script src="game.js"></script>
    <script src="ui.js"></script>
    <!-- Explicitly point frontend to backend API -->
    <script>
        window.ORBELLA_API_BASE = 'http://127.0.0.1:8000';
    </script>
    <script src="https://unpkg.com/three@0.160.0/build/three.min.js"></script>
    <script src="orbella.js"></script>
    <script src="main.js"></script>
</body>

</html>